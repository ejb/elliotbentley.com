---

import { title, description } from './blog.astro';

// collection
export async function getStaticPaths({rss}) {

  /** Load posts, sort newest -> oldest */
  let allPosts = Astro.fetchContent('./blog/*.md');
  allPosts.sort((a, b) => new Date(b.date) - new Date(a.date));

  rss({
    title: 'Elliot Bentleyâ€™s Blog',
    description: 'Occasional posts on interactive graphics and web development.',
    customData: `<language>en-gb</language>`,
    item: (item) => ({
      title: item.title,
      description: item.description || item.title,
      link: item.url,
      pubDate: item.date,
    }),
    dest: "/feed/posts.xml",
  });

  return allPosts.map(item => {
    return {
      params: {
        slug: item.slug,
      }
    }
  });
}
---